<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysqlNote | 无为徐生</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/reco-blog/favicon.ico">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/reco-blog/assets/css/0.styles.bfa04787.css" as="style"><link rel="preload" href="/reco-blog/assets/js/app.fc80a8f6.js" as="script"><link rel="preload" href="/reco-blog/assets/js/3.c09d8458.js" as="script"><link rel="preload" href="/reco-blog/assets/js/1.46157097.js" as="script"><link rel="preload" href="/reco-blog/assets/js/69.c22aa700.js" as="script"><link rel="prefetch" href="/reco-blog/assets/js/10.b4300c39.js"><link rel="prefetch" href="/reco-blog/assets/js/100.606b8135.js"><link rel="prefetch" href="/reco-blog/assets/js/101.91d28adf.js"><link rel="prefetch" href="/reco-blog/assets/js/102.1bcc2515.js"><link rel="prefetch" href="/reco-blog/assets/js/103.12d8cc90.js"><link rel="prefetch" href="/reco-blog/assets/js/11.4ec28b3e.js"><link rel="prefetch" href="/reco-blog/assets/js/12.3e7b79bc.js"><link rel="prefetch" href="/reco-blog/assets/js/13.e1dda8ca.js"><link rel="prefetch" href="/reco-blog/assets/js/14.19a2439e.js"><link rel="prefetch" href="/reco-blog/assets/js/15.7fd1709d.js"><link rel="prefetch" href="/reco-blog/assets/js/16.42693cc2.js"><link rel="prefetch" href="/reco-blog/assets/js/17.46aee657.js"><link rel="prefetch" href="/reco-blog/assets/js/18.dc3dffd7.js"><link rel="prefetch" href="/reco-blog/assets/js/19.ba72e661.js"><link rel="prefetch" href="/reco-blog/assets/js/20.dfbe9e7f.js"><link rel="prefetch" href="/reco-blog/assets/js/21.3df5a817.js"><link rel="prefetch" href="/reco-blog/assets/js/22.f87e9695.js"><link rel="prefetch" href="/reco-blog/assets/js/23.a05d4fb0.js"><link rel="prefetch" href="/reco-blog/assets/js/24.9516e165.js"><link rel="prefetch" href="/reco-blog/assets/js/25.6e0e1a23.js"><link rel="prefetch" href="/reco-blog/assets/js/26.4759e5f7.js"><link rel="prefetch" href="/reco-blog/assets/js/27.f2e01503.js"><link rel="prefetch" href="/reco-blog/assets/js/28.c62bf8e3.js"><link rel="prefetch" href="/reco-blog/assets/js/29.583c2e3a.js"><link rel="prefetch" href="/reco-blog/assets/js/30.52213850.js"><link rel="prefetch" href="/reco-blog/assets/js/31.9e5848a1.js"><link rel="prefetch" href="/reco-blog/assets/js/32.24b24b83.js"><link rel="prefetch" href="/reco-blog/assets/js/33.6f1e745d.js"><link rel="prefetch" href="/reco-blog/assets/js/34.befbbece.js"><link rel="prefetch" href="/reco-blog/assets/js/35.dc354653.js"><link rel="prefetch" href="/reco-blog/assets/js/36.9c54eba8.js"><link rel="prefetch" href="/reco-blog/assets/js/37.3c635114.js"><link rel="prefetch" href="/reco-blog/assets/js/38.3c2153fa.js"><link rel="prefetch" href="/reco-blog/assets/js/39.6515c12e.js"><link rel="prefetch" href="/reco-blog/assets/js/4.79902ab3.js"><link rel="prefetch" href="/reco-blog/assets/js/40.479f8c58.js"><link rel="prefetch" href="/reco-blog/assets/js/41.5dc96363.js"><link rel="prefetch" href="/reco-blog/assets/js/42.e7b9970f.js"><link rel="prefetch" href="/reco-blog/assets/js/43.5225ed2a.js"><link rel="prefetch" href="/reco-blog/assets/js/44.c5247120.js"><link rel="prefetch" href="/reco-blog/assets/js/45.5052d189.js"><link rel="prefetch" href="/reco-blog/assets/js/46.e2f327a8.js"><link rel="prefetch" href="/reco-blog/assets/js/47.4d71bf89.js"><link rel="prefetch" href="/reco-blog/assets/js/48.51a4b5c0.js"><link rel="prefetch" href="/reco-blog/assets/js/49.966fcac3.js"><link rel="prefetch" href="/reco-blog/assets/js/5.17802244.js"><link rel="prefetch" href="/reco-blog/assets/js/50.17a18ece.js"><link rel="prefetch" href="/reco-blog/assets/js/51.7e0d97fb.js"><link rel="prefetch" href="/reco-blog/assets/js/52.f604f125.js"><link rel="prefetch" href="/reco-blog/assets/js/53.44c4cca7.js"><link rel="prefetch" href="/reco-blog/assets/js/54.a0d49643.js"><link rel="prefetch" href="/reco-blog/assets/js/55.98cc5fcf.js"><link rel="prefetch" href="/reco-blog/assets/js/56.1d7efd42.js"><link rel="prefetch" href="/reco-blog/assets/js/57.1b143f53.js"><link rel="prefetch" href="/reco-blog/assets/js/58.797c55f6.js"><link rel="prefetch" href="/reco-blog/assets/js/59.06d1a7a5.js"><link rel="prefetch" href="/reco-blog/assets/js/6.cc984c60.js"><link rel="prefetch" href="/reco-blog/assets/js/60.a3787cb9.js"><link rel="prefetch" href="/reco-blog/assets/js/61.ed4b534e.js"><link rel="prefetch" href="/reco-blog/assets/js/62.388384f9.js"><link rel="prefetch" href="/reco-blog/assets/js/63.3c8e99c3.js"><link rel="prefetch" href="/reco-blog/assets/js/64.2cf735e7.js"><link rel="prefetch" href="/reco-blog/assets/js/65.290e9c0f.js"><link rel="prefetch" href="/reco-blog/assets/js/66.00c1c1a6.js"><link rel="prefetch" href="/reco-blog/assets/js/67.95161eb5.js"><link rel="prefetch" href="/reco-blog/assets/js/68.115f1a1a.js"><link rel="prefetch" href="/reco-blog/assets/js/7.d1221b25.js"><link rel="prefetch" href="/reco-blog/assets/js/70.106d3664.js"><link rel="prefetch" href="/reco-blog/assets/js/71.73004a43.js"><link rel="prefetch" href="/reco-blog/assets/js/72.cc219101.js"><link rel="prefetch" href="/reco-blog/assets/js/73.04f25a62.js"><link rel="prefetch" href="/reco-blog/assets/js/74.21655d9b.js"><link rel="prefetch" href="/reco-blog/assets/js/75.13edffe2.js"><link rel="prefetch" href="/reco-blog/assets/js/76.8306d9ca.js"><link rel="prefetch" href="/reco-blog/assets/js/77.84bec2c8.js"><link rel="prefetch" href="/reco-blog/assets/js/78.fd03346f.js"><link rel="prefetch" href="/reco-blog/assets/js/79.cb6ac833.js"><link rel="prefetch" href="/reco-blog/assets/js/8.9f31aed6.js"><link rel="prefetch" href="/reco-blog/assets/js/80.17bad9ef.js"><link rel="prefetch" href="/reco-blog/assets/js/81.3c3146a6.js"><link rel="prefetch" href="/reco-blog/assets/js/82.8e6cd6e3.js"><link rel="prefetch" href="/reco-blog/assets/js/83.71e54398.js"><link rel="prefetch" href="/reco-blog/assets/js/84.eded973b.js"><link rel="prefetch" href="/reco-blog/assets/js/85.5de97a69.js"><link rel="prefetch" href="/reco-blog/assets/js/86.069027ea.js"><link rel="prefetch" href="/reco-blog/assets/js/87.fe8dfde2.js"><link rel="prefetch" href="/reco-blog/assets/js/88.3cec15ad.js"><link rel="prefetch" href="/reco-blog/assets/js/89.f70273f4.js"><link rel="prefetch" href="/reco-blog/assets/js/9.c3acec46.js"><link rel="prefetch" href="/reco-blog/assets/js/90.9d6b2119.js"><link rel="prefetch" href="/reco-blog/assets/js/91.09104c53.js"><link rel="prefetch" href="/reco-blog/assets/js/92.78bc43c1.js"><link rel="prefetch" href="/reco-blog/assets/js/93.82676b41.js"><link rel="prefetch" href="/reco-blog/assets/js/94.dff88aa9.js"><link rel="prefetch" href="/reco-blog/assets/js/95.0ebe191f.js"><link rel="prefetch" href="/reco-blog/assets/js/96.e0ff4c89.js"><link rel="prefetch" href="/reco-blog/assets/js/97.e1ae4ace.js"><link rel="prefetch" href="/reco-blog/assets/js/98.0d2c3de8.js"><link rel="prefetch" href="/reco-blog/assets/js/99.76cf0849.js">
    <link rel="stylesheet" href="/reco-blog/assets/css/0.styles.bfa04787.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-1aefc0b4><div data-v-1aefc0b4><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1aefc0b4 data-v-1aefc0b4><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>无为徐生</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2></p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>无为徐生</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2025
        </a></span></div></div> <div class="hide" data-v-1aefc0b4><header class="navbar" data-v-1aefc0b4><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/reco-blog/" class="home-link router-link-active"><img src="/reco-blog/logo.png" alt="无为徐生" class="logo"> <span class="site-name">无为徐生</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/reco-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/reco-blog/docs/目录.html" class="nav-link"><i class="iconfont reco-menu"></i>
  目录
</a></div><div class="nav-item"><a href="/reco-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/categories/编程/" class="nav-link"><i class="undefined"></i>
  编程
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/categories/书法/" class="nav-link"><i class="undefined"></i>
  书法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      生活
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/日常Note.html" class="nav-link"><i class="undefined"></i>
  日常Note
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/诗文浅作.html" class="nav-link"><i class="undefined"></i>
  诗文浅作
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/驾考记事.html" class="nav-link"><i class="undefined"></i>
  驾考记事
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/健身与学习.html" class="nav-link"><i class="undefined"></i>
  健身与学习
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/吉他练习笔记.html" class="nav-link"><i class="undefined"></i>
  吉他练习笔记
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/文档/如何练好书法.html" class="nav-link"><i class="undefined"></i>
  如何练好书法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/我的原神旅行观测记录.html" class="nav-link"><i class="undefined"></i>
  我的原神旅行观测记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      编程
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/java/javaNote.html" class="nav-link"><i class="undefined"></i>
  javaNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/java/排序算法.html" class="nav-link"><i class="undefined"></i>
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/gitNote.html" class="nav-link"><i class="undefined"></i>
  gitNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/linuxNote-x.html" class="nav-link"><i class="undefined"></i>
  linuxNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/vuepress构建项目.html" class="nav-link"><i class="undefined"></i>
  vuepress构建项目
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/数据库/mysqlNote.html" class="nav-link"><i class="undefined"></i>
  mysqlNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/数据库/oracleNote.html" class="nav-link"><i class="undefined"></i>
  oracleNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/资料/javaScript笔记.html" class="nav-link"><i class="undefined"></i>
  javaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/资料/工具网站readMe.html" class="nav-link"><i class="undefined"></i>
  工具网站readMe
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      书法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/书法/赤壁赋.html" class="nav-link"><i class="undefined"></i>
  赤壁赋
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/书法/多宝塔碑.html" class="nav-link"><i class="undefined"></i>
  多宝塔碑
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/徐书法.html" class="nav-link"><i class="undefined"></i>
  徐书法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/无为徐生.html" class="nav-link"><i class="undefined"></i>
  无为徐生
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/古文诗词.html" class="nav-link"><i class="undefined"></i>
  古文诗词
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/书法练习轨迹ReadMe.html" class="nav-link"><i class="undefined"></i>
  书法练习轨迹
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/轨迹/有感之杂说.html" class="nav-link"><i class="undefined"></i>
  有感之杂说
</a></li></ul></div></div><div class="nav-item"><a href="/reco-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/reco-blog/docs/关于我.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1aefc0b4></div> <aside class="sidebar" data-v-1aefc0b4><div class="personal-info-wrapper" data-v-39576ba9 data-v-1aefc0b4><img src="/reco-blog/template.png" alt="author-avatar" class="personal-img" data-v-39576ba9> <h3 class="name" data-v-39576ba9>
    无为徐生
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>90</h3> <h6 data-v-39576ba9>文章</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>86</h3> <h6 data-v-39576ba9>标签</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/reco-blog/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><a href="/reco-blog/docs/目录.html" class="nav-link"><i class="iconfont reco-menu"></i>
  目录
</a></div><div class="nav-item"><a href="/reco-blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/categories/生活/" class="nav-link"><i class="undefined"></i>
  生活
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/categories/编程/" class="nav-link"><i class="undefined"></i>
  编程
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/categories/书法/" class="nav-link"><i class="undefined"></i>
  书法
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-document"></i>
      生活
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/日常Note.html" class="nav-link"><i class="undefined"></i>
  日常Note
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/诗文浅作.html" class="nav-link"><i class="undefined"></i>
  诗文浅作
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/驾考记事.html" class="nav-link"><i class="undefined"></i>
  驾考记事
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/健身与学习.html" class="nav-link"><i class="undefined"></i>
  健身与学习
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/吉他练习笔记.html" class="nav-link"><i class="undefined"></i>
  吉他练习笔记
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/文档/如何练好书法.html" class="nav-link"><i class="undefined"></i>
  如何练好书法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/生活/随笔/我的原神旅行观测记录.html" class="nav-link"><i class="undefined"></i>
  我的原神旅行观测记录
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-api"></i>
      编程
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/java/javaNote.html" class="nav-link"><i class="undefined"></i>
  javaNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/java/排序算法.html" class="nav-link"><i class="undefined"></i>
  排序算法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/gitNote.html" class="nav-link"><i class="undefined"></i>
  gitNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/linuxNote-x.html" class="nav-link"><i class="undefined"></i>
  linuxNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/运维/vuepress构建项目.html" class="nav-link"><i class="undefined"></i>
  vuepress构建项目
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/数据库/mysqlNote.html" class="nav-link"><i class="undefined"></i>
  mysqlNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/数据库/oracleNote.html" class="nav-link"><i class="undefined"></i>
  oracleNote
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/资料/javaScript笔记.html" class="nav-link"><i class="undefined"></i>
  javaScript笔记
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/编程/资料/工具网站readMe.html" class="nav-link"><i class="undefined"></i>
  工具网站readMe
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      书法
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/书法/赤壁赋.html" class="nav-link"><i class="undefined"></i>
  赤壁赋
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/书法/多宝塔碑.html" class="nav-link"><i class="undefined"></i>
  多宝塔碑
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/徐书法.html" class="nav-link"><i class="undefined"></i>
  徐书法
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/无为徐生.html" class="nav-link"><i class="undefined"></i>
  无为徐生
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/古文诗词.html" class="nav-link"><i class="undefined"></i>
  古文诗词
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/练习/书法练习轨迹ReadMe.html" class="nav-link"><i class="undefined"></i>
  书法练习轨迹
</a></li><li class="dropdown-item"><!----> <a href="/reco-blog/docs/书法/轨迹/有感之杂说.html" class="nav-link"><i class="undefined"></i>
  有感之杂说
</a></li></ul></div></div><div class="nav-item"><a href="/reco-blog/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><a href="/reco-blog/docs/关于我.html" class="nav-link"><i class="iconfont reco-account"></i>
  关于我
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>运维</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>数据库</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html" aria-current="page" class="active sidebar-link">mysqlNote</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/oraclenote.html" class="sidebar-link">oracleNote</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/ldapnote.html" class="sidebar-link">ldapNote</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/redis.html" class="sidebar-link">redis</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mongo.html" class="sidebar-link">mongo</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/shu-ju-ku-ge-chi-ji-bie.html" class="sidebar-link">数据库隔离级别</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlkai-qi-log-binri-zhi.html" class="sidebar-link">mysql开启log-bin日志</a></li><li><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlzhi-explansuo-yin-you-hua-shuo-ming.html" class="sidebar-link">mysql之explan索引优化说明</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>资料</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-1aefc0b4><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>mysqlNote</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>无为徐生</span>
            
          <span data-v-25ba6db2>2022 - </span>
          2025
        </a></span></div></div> <div data-v-1aefc0b4><main class="page"><section><div class="page-title"><h1 class="title">mysqlNote</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>无为徐生</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>2019/1/4</span></i> <i class="iconfont reco-eye" data-v-f875f3fc><span id="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-f875f3fc><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>mysql</span><span class="tag-item" data-v-f875f3fc>安装</span><span class="tag-item" data-v-f875f3fc>编程</span><span class="tag-item" data-v-f875f3fc>数据库</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1、安装mysql"><a href="#_1、安装mysql" class="header-anchor">#</a> 1、安装mysql</h2> <blockquote><p>安装mysql 5.7</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code>压缩包，免安装文件，安装mysql。参考：
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>scott180<span class="token punctuation">.</span>github<span class="token punctuation">.</span>io<span class="token operator">/</span>reco<span class="token operator">-</span>blog
<span class="token literal-property property">http</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>wengengeng<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">52013650</span>
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>jyjia<span class="token operator">/</span>archive<span class="token operator">/</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">03</span><span class="token operator">/</span><span class="token number">07</span><span class="token operator">/</span><span class="token number">10490013</span><span class="token punctuation">.</span>html


下载mysql
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">www.mysql.com</span><span class="token regex-delimiter">/</span></span>
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>aliyundrive<span class="token punctuation">.</span>com<span class="token operator">/</span>s<span class="token operator">/</span>pymjQca3DbY

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_1-1、下载软件"><a href="#_1-1、下载软件" class="header-anchor">#</a> 1.1、下载软件</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">&gt;</span>下载mysql
进入官网：https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>mysql<span class="token punctuation">.</span>com<span class="token operator">/</span>
单击【<span class="token class-name">Downloads</span>】选项卡
最下面有个【 <span class="token class-name">MySQL</span> <span class="token class-name">Community</span> <span class="token class-name">Edition</span>  <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span>】，单击【<span class="token class-name">Community</span> <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span> <span class="token class-name">Downloads</span> »】
单击【<span class="token class-name">MySQL</span> <span class="token class-name">Community</span> <span class="token class-name">Server</span> <span class="token punctuation">(</span>GPL<span class="token punctuation">)</span>】下的【DOWNLOAD】
在弹出的页面上下载【<span class="token class-name">Windows</span> <span class="token punctuation">(</span>x86<span class="token punctuation">,</span> <span class="token number">64</span><span class="token operator">-</span>bit<span class="token punctuation">)</span><span class="token punctuation">,</span> ZIP <span class="token class-name">Archive</span>】

<span class="token operator">&gt;</span>安装mysql
压缩包相当于免安装文件，要想使用它，需要配置正确，并通过服务来启动数据库服务。
<span class="token number">1.</span>把压缩包解压到你喜欢的位置
本示例解压到：<span class="token class-name">D</span><span class="token operator">:</span>\mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.13</span><span class="token operator">-</span>winx64，文件夹下


<span class="token number">2.</span>创建my<span class="token punctuation">.</span>ini文件（在 <span class="token class-name">D</span><span class="token operator">:</span>\mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.13</span><span class="token operator">-</span>winx64 目录），内容如下：

    <span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>  
    port<span class="token operator">=</span><span class="token number">3306</span>  
    basedir  <span class="token operator">=</span><span class="token string">&quot;D:\\mysql-5.7.13-winx64\\&quot;</span>  
    datadir  <span class="token operator">=</span><span class="token string">&quot;F:\\mysqlData\\&quot;</span>  

    max_allowed_packet <span class="token operator">=</span> <span class="token number">32</span>M  

注意，basedir和datadir是必须要配置的，basedir就是你解压的目录。官方文档上说，如果你喜欢用反斜杠，则要用双反斜杠，斜杠的话就不用这样。即：<span class="token class-name">D</span><span class="token operator">:</span>\\mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.13</span><span class="token operator">-</span>winx64\\ 或：<span class="token class-name">D</span><span class="token operator">:</span><span class="token operator">/</span>mysql<span class="token operator">-</span><span class="token number">5.7</span><span class="token number">.13</span><span class="token operator">-</span>winx64<span class="token operator">/</span>
由于本人喜欢把数据库的数据文件独立出来，所以就把datadir配置到其它地方，方便管理。另外，创建该目录。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_1-2、配置环境变量"><a href="#_1-2、配置环境变量" class="header-anchor">#</a> 1.2、配置环境变量</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token number">3.</span>配置环境变量

    添加一个名叫 MYSQL_HOME 的变量。
    修改<span class="token class-name">Path</span>变量，在末尾添加 <span class="token operator">%</span>MYSQL_HOME<span class="token operator">%</span>\bin 

<span class="token number">4.</span>安装mysql服务

    以管理员身份运行cmd，进入mysql的bin目录。
    初始化数据库文件

    mysqld  <span class="token operator">--</span>initialize  

 初始化成功后，会在datadir目录下生成一些文件，其中，xxx<span class="token punctuation">.</span>err文件里说明了root账户的临时密码。那行大概长这样：
 

    <span class="token number">2016</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">24</span>T05<span class="token operator">:</span><span class="token number">19</span><span class="token operator">:</span><span class="token number">20.152135</span>Z <span class="token number">1</span> <span class="token punctuation">[</span><span class="token class-name">Note</span><span class="token punctuation">]</span> <span class="token class-name">A</span> temporary password is generated <span class="token keyword">for</span> root<span class="token annotation punctuation">@localhost</span><span class="token operator">:</span> <span class="token function">bL2uuwuf0H</span><span class="token punctuation">(</span><span class="token class-name">X</span>  


即密码是：<span class="token function">bL2uuwuf0H</span><span class="token punctuation">(</span><span class="token class-name">X</span>

    注册mysql服务
    mysqld <span class="token operator">-</span>install <span class="token class-name">MySQL</span>  

	
    启动mysql服务
    net start <span class="token class-name">MySQL</span>  


    修改root密码
	输入以下命令，回车，然后输入上面的默认密码：
    mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p  


	进入<span class="token class-name">MySQL</span>命令行模式后，输入如下命令，命令中的 new_password 为root账号的新密码，请修改它。
    ALTER USER <span class="token char">'root'</span>@'localhost' IDENTIFIED BY 'new_password'<span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_1-3、注意事项"><a href="#_1-3、注意事项" class="header-anchor">#</a> 1.3、注意事项</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>	
注意：
一、如果会弹出“无法启动此程序，因为计算机中丢失 msvcp120<span class="token punctuation">.</span>dll<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>”等类似的提示  请安装 vcredist_x86<span class="token punctuation">.</span>exe

二、配置   
	character_set_server<span class="token operator">=</span>utf8
	lower_case_table_names<span class="token operator">=</span><span class="token number">2</span>
是为了区分大小写字母

三、配置
	sql_mode<span class="token operator">=</span>'NO_ENGINE_SUBSTITUTION'
是为了解决这个错误   <span class="token number">1055</span> <span class="token operator">-</span> <span class="token class-name">Expression</span> #<span class="token number">1</span> of ORDER BY clause is not in GROUP BY clause and contains nonaggregated  on columns in GROUP <span class="token class-name">BY</span> clause<span class="token punctuation">;</span> <span class="token keyword">this</span> is incompatible <span class="token keyword">with</span> <span class="token namespace">sql_mode</span><span class="token operator">=</span>only_full_group_by

四、解决密码不能登陆问题 <span class="token class-name">ERROR</span> <span class="token number">1045</span> <span class="token punctuation">(</span><span class="token number">28000</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Unknown</span> error <span class="token number">1045</span>
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>jingyan<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com<span class="token operator">/</span>article<span class="token operator">/</span><span class="token number">7</span>c6fb42865213f80642c90c3<span class="token punctuation">.</span>html

	刚刚接触<span class="token class-name">MySQL</span>时可能会出现这样的问题：
	<span class="token number">1</span>
	当cmd中输入mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p后会出现以下问题：
	 <span class="token class-name">ERROR</span> <span class="token number">1045</span> <span class="token punctuation">(</span><span class="token number">28000</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Access</span> denied <span class="token keyword">for</span> user <span class="token char">'root'</span>@'localhost' <span class="token punctuation">(</span>using password）

	可以这样做，先找到mysql bin目录下的my<span class="token punctuation">.</span>ini文件打开编辑，并在<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>下面加上skip<span class="token operator">-</span>grant<span class="token operator">-</span>tables，用于跳过密码问题，但是这并不能彻底解决。
	<span class="token number">2</span>
	重启mysql服务

	net stop mysql

	net start mysql

	<span class="token class-name">MySQL</span>登录问题 <span class="token class-name">ERROR</span> <span class="token number">1045</span> <span class="token punctuation">(</span><span class="token number">28000</span><span class="token punctuation">)</span>
	<span class="token number">3</span>
	进入数据库，重置密码。

	mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p         <span class="token class-name">Enter</span>

	不用管password          <span class="token class-name">Enter</span>

	mysql<span class="token operator">&gt;</span> use mysql<span class="token punctuation">;</span>      <span class="token class-name">Enter</span>

	mysql<span class="token operator">&gt;</span> update user set password<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&quot;新密码&quot;</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token string">&quot;root&quot;</span><span class="token punctuation">;</span>   （密码自己设）

	mysql<span class="token operator">&gt;</span> update mysql<span class="token punctuation">.</span>user set authentication_string<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token char">'12344'</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token char">'root'</span> <span class="token punctuation">;</span>

	mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>      刷新数据库

	mysql<span class="token operator">&gt;</span> quit<span class="token punctuation">;</span>

	<span class="token number">4</span>
	修改my<span class="token punctuation">.</span>ini <span class="token punctuation">,</span>注释掉skip<span class="token operator">-</span>grant<span class="token operator">-</span><span class="token function">tables</span><span class="token punctuation">(</span>以防下次出问题<span class="token punctuation">)</span>

	保存退出

	<span class="token number">5</span>
	重启<span class="token class-name">MySQL</span>服务（步骤二）。

	END
	注意事项
	mysql语句后一定要加分号，否则就会没有反应


	新安装的<span class="token class-name">MySQL5</span><span class="token number">.7</span>，登录时提示密码错误，安装的时候并没有更改密码，后来通过免密码登录的方式更改密码，输入update mysql<span class="token punctuation">.</span>user  set password<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token char">'root'</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token char">'root'</span>时提示<span class="token class-name">ERROR</span> <span class="token number">1054</span> <span class="token punctuation">(</span><span class="token number">42</span>S22<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Unknown</span> column 'password<span class="token char">' in '</span>field list'，原来是mysql数据库下已经没有password这个字段了，password字段改成了authentication_string 。
	所以只要将更改语句变为下面的就可以了
	update mysql<span class="token punctuation">.</span>user set authentication_string<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token char">'root'</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token char">'root'</span> <span class="token punctuation">;</span>


	<span class="token number">6</span>  报错 <span class="token class-name">ERROR</span> <span class="token number">1820</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token class-name">Unknown</span> error <span class="token number">1820</span>
	   <span class="token class-name">SET</span> PASSWORD <span class="token operator">=</span> <span class="token function">PASSWORD</span><span class="token punctuation">(</span><span class="token char">'12344'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	   
五、win10 不能自启
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>jyjia<span class="token operator">/</span>archive<span class="token operator">/</span><span class="token number">2019</span><span class="token operator">/</span><span class="token number">03</span><span class="token operator">/</span><span class="token number">07</span><span class="token operator">/</span><span class="token number">10490013.</span>html
解决办法： my<span class="token punctuation">.</span>ini文件保存为ANSI格式文件 ！！！

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br></div></div><h2 id="_2、操作语法"><a href="#_2、操作语法" class="header-anchor">#</a> 2、操作语法</h2> <h3 id="_2-1、基础命令"><a href="#_2-1、基础命令" class="header-anchor">#</a> 2.1、基础命令</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">-- dos命令进入数据</span>
<span class="token number">1.</span>进入安装mysql的目录
cd C:\Program Files\MySQL\MySQL Server <span class="token number">5.7</span>\bin
<span class="token number">2.</span>输入用户名、密码
mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>proot


<span class="token comment">-- 显示数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>

<span class="token comment">-- 使用这个数据库:与oracle的用户类似</span>
<span class="token keyword">use</span> mydata<span class="token punctuation">;</span>

<span class="token comment">-- 显示表</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">table</span> table_name<span class="token punctuation">;</span>

<span class="token comment">-- 创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> mydata<span class="token punctuation">;</span>

<span class="token comment">-- 描述表</span>
<span class="token keyword">desc</span> dept<span class="token punctuation">;</span>


<span class="token comment">-- 插入数据</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">insert</span> <span class="token keyword">into</span> dept <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'bb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 执行sql脚本语句 </span>
\<span class="token punctuation">.</span> c:\\mysql_script\\mydata<span class="token punctuation">.</span><span class="token keyword">sql</span>


<span class="token comment">-- 查询 </span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> concat<span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token operator">like</span> <span class="token string">'%,admin,%'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> logs_2016_11 <span class="token keyword">union</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> logs_2016_12 \G<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> table_name <span class="token keyword">from</span> information_schema<span class="token punctuation">.</span><span class="token keyword">tables</span> <span class="token keyword">where</span> table_schema<span class="token operator">=</span><span class="token string">'survey1'</span> <span class="token operator">and</span> table_name
<span class="token operator">like</span> <span class="token string">'logs_%'</span> <span class="token operator">and</span> table_name<span class="token operator">&lt;=</span><span class="token string">'logs_2016_12'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> table_name <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token operator">not</span> <span class="token keyword">exists</span> t <span class="token operator">like</span> logs<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> dept
<span class="token punctuation">(</span>
deptno <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
dname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
loc <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> emp
<span class="token punctuation">(</span>
empno <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
ename <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
mrg <span class="token keyword">int</span><span class="token punctuation">,</span>
hiredate <span class="token keyword">datetime</span><span class="token punctuation">,</span>
sal <span class="token keyword">double</span><span class="token punctuation">,</span>
comm <span class="token keyword">double</span><span class="token punctuation">,</span>
deptno <span class="token keyword">int</span><span class="token punctuation">,</span>
<span class="token keyword">foreign</span> <span class="token keyword">key</span><span class="token punctuation">(</span>deptno<span class="token punctuation">)</span> <span class="token keyword">references</span> dept<span class="token punctuation">(</span>deptno<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

添加外键
<span class="token keyword">alter</span> <span class="token keyword">table</span> tb_OrderOut <span class="token keyword">add</span> <span class="token keyword">constraint</span> tb_OrderOut_goodsid_fk <span class="token keyword">Foreign</span> <span class="token keyword">Key</span> <span class="token punctuation">(</span>goodsid<span class="token punctuation">)</span>
<span class="token keyword">References</span> tb_Product <span class="token punctuation">(</span>goodsid<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> t2 <span class="token keyword">add</span> <span class="token keyword">constraint</span> tb_foreignkey <span class="token keyword">foreign</span>  <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">references</span> test<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> emp<span class="token punctuation">;</span>
或者 <span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>A<span class="token punctuation">`</span></span><span class="token punctuation">;</span>


<span class="token comment">-- 创建数据库  create database dt1;</span>
<span class="token comment">-- 删除数据库  drop database dt1;</span>

<span class="token comment">-- 上下键，显示上次的命令</span>

数据库的区别：数据类型，分页程序
<span class="token comment">-- mysql的分页程序： 倒叙从第三行后面的两个</span>
 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>



<span class="token comment">--  mysql的注释</span>
mysql 服务器支持 <span class="token comment"># 到该行结束、-- 到该行结束 以及 /* 行中间或多个行 */ 的注释方格： </span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment"># 这个注释直到该行结束</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>     <span class="token comment">-- 这个注释直到该行结束</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token number">1</span> <span class="token comment">/* 这是一个在行中间的注释 */</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token number">1</span><span class="token operator">+</span>
<span class="token comment">/*
这是一个
多行注释的形式
*/</span>
  注意 <span class="token comment">-- (双长划) 注释风格要求在两个长划后至少有一个空格！ </span>
  尽管服务器理解刚才描述的注释句法，但 MySQL 客户端的语法分析在 <span class="token comment">/* ... */</span> 注释方式上还有所限止： 
  单引号和双引号被用来标志一个被引用字符串的开始，即使是在一个注释中。如果注释中的引号没有另一个引号与之配对，那和语法分析程序就不会认为注释结束。如果你以交互式运行 mysql，你会产生困惑，因为提示符从 mysql<span class="token operator">&gt;</span> 变为 <span class="token string">'&gt; 或 &quot;&gt;。

  '</span>

<span class="token comment">-- mysql的自动递增auto_increment（类似oracle的序列 sequence）</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> article<span class="token punctuation">(</span>
id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>


修改表名：  <span class="token keyword">alter</span> <span class="token keyword">table</span> t_book <span class="token keyword">rename</span> <span class="token keyword">to</span> bbb<span class="token punctuation">;</span> 
添加列：    <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">column</span> 列名 <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
删除列：    <span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">column</span> 列名<span class="token punctuation">;</span> 
修改列名：  <span class="token keyword">alter</span> <span class="token keyword">table</span> bbb change nnnnn hh <span class="token keyword">int</span><span class="token punctuation">;</span> 
修改列属性：<span class="token keyword">alter</span> <span class="token keyword">table</span> t_book <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 


删除一个已经确定存在的数据库
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">database</span> drop_database<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

删除一个不确定存在的数据库
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">database</span> drop_database<span class="token punctuation">;</span>
ERROR <span class="token number">1008</span> <span class="token punctuation">(</span>HY000<span class="token punctuation">)</span>: Can<span class="token string">'t drop database '</span>drop_database<span class="token string">'; database doesn'</span>t exist
<span class="token comment">//发生错误，不能删除'drop_database'数据库，该数据库不存在。</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> drop_database<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected<span class="token punctuation">,</span> <span class="token number">1</span> warning <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span><span class="token comment">//产生一个警告说明此数据库不存在</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">create</span> <span class="token keyword">database</span> drop_database<span class="token punctuation">;</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1</span> <span class="token keyword">row</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> drop_database<span class="token punctuation">;</span><span class="token comment">//if exists 判断数据库是否存在，不存在也不产生错误</span>
Query OK<span class="token punctuation">,</span> <span class="token number">0</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 


内连接
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> orders<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>birthday <span class="token keyword">from</span> orders<span class="token punctuation">,</span><span class="token keyword">user</span> <span class="token keyword">where</span> orders<span class="token punctuation">.</span>user_id<span class="token operator">=</span><span class="token keyword">user</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span>

外连接
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> orders<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>birthday <span class="token keyword">from</span> orders <span class="token keyword">join</span> <span class="token keyword">user</span> <span class="token keyword">on</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span>user_id<span class="token operator">=</span><span class="token keyword">user</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
左外连接
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> orders<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>birthday <span class="token keyword">from</span> orders <span class="token keyword">left</span> <span class="token keyword">join</span> <span class="token keyword">user</span> <span class="token keyword">on</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span>user_id<span class="token operator">=</span><span class="token keyword">user</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
右外连接
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> orders<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>sex<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">.</span>birthday <span class="token keyword">from</span> orders <span class="token keyword">right</span> <span class="token keyword">join</span> <span class="token keyword">user</span> <span class="token keyword">on</span><span class="token punctuation">(</span>orders<span class="token punctuation">.</span><span class="token keyword">use</span>
r_id<span class="token operator">=</span><span class="token keyword">user</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token number">1.</span>显示MYSQL的版本
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">-----------------------+ </span>
<span class="token operator">|</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-----------------------+ </span>
<span class="token operator">|</span> <span class="token number">6.0</span><span class="token number">.4</span><span class="token operator">-</span>alpha<span class="token operator">-</span>community <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">-----------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span> 

<span class="token number">2.</span> 显示当前时间
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token operator">|</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token operator">|</span> <span class="token number">2009</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">15</span> <span class="token number">22</span>:<span class="token number">35</span>:<span class="token number">32</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.04</span> sec<span class="token punctuation">)</span> 

<span class="token number">3.</span> 显示年月日
<span class="token keyword">SELECT</span> DAYOFMONTH<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">--------------------------+ </span>
<span class="token operator">|</span> DAYOFMONTH<span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">--------------------------+ </span>
<span class="token operator">|</span> <span class="token number">15</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">--------------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span> 

<span class="token keyword">SELECT</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token operator">|</span> <span class="token keyword">MONTH</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token operator">|</span> <span class="token number">9</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">---------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 

<span class="token keyword">SELECT</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">--------------------+ </span>
<span class="token operator">|</span> <span class="token keyword">YEAR</span><span class="token punctuation">(</span><span class="token keyword">CURRENT_DATE</span><span class="token punctuation">)</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">--------------------+ </span>
<span class="token operator">|</span> <span class="token number">2009</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">--------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 

<span class="token number">4.</span> 显示字符串
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token string">&quot;welecome to my blog!&quot;</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token operator">|</span> welecome <span class="token keyword">to</span> my blog<span class="token operator">!</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token operator">|</span> welecome <span class="token keyword">to</span> my blog<span class="token operator">!</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 

<span class="token number">5.</span> 当计算器用
<span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">25</span><span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">25</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token operator">|</span> <span class="token number">26.60</span> <span class="token operator">|</span> 
<span class="token operator">+</span><span class="token comment">----------------------+ </span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span> 




备份数据库
命令在DOS的<span class="token punctuation">[</span>url<span class="token operator">=</span><span class="token keyword">file</span>:<span class="token comment">//\\mysql\\bin]\\mysql\\bin[/url]目录下执行</span>

<span class="token number">1.</span>导出整个数据库
导出文件默认是存在mysql\bin目录下
mysqldump <span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p 数据库名 <span class="token operator">&gt;</span> 导出的文件名
mysqldump <span class="token operator">-</span>u user_name <span class="token operator">-</span>p123456 database_name <span class="token operator">&gt;</span> outfile_name<span class="token punctuation">.</span><span class="token keyword">sql</span>

<span class="token number">2.</span>导出一个表
mysqldump <span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p 数据库名 表名<span class="token operator">&gt;</span> 导出的文件名
mysqldump <span class="token operator">-</span>u user_name <span class="token operator">-</span>p database_name table_name <span class="token operator">&gt;</span> outfile_name<span class="token punctuation">.</span><span class="token keyword">sql</span>

<span class="token number">3.</span>导出一个数据库结构
mysqldump <span class="token operator">-</span>u user_name <span class="token operator">-</span>p <span class="token operator">-</span>d –<span class="token keyword">add</span><span class="token operator">-</span><span class="token keyword">drop</span><span class="token operator">-</span><span class="token keyword">table</span> database_name <span class="token operator">&gt;</span> outfile_name<span class="token punctuation">.</span><span class="token keyword">sql</span>
<span class="token operator">-</span>d 没有数据 –<span class="token keyword">add</span><span class="token operator">-</span><span class="token keyword">drop</span><span class="token operator">-</span><span class="token keyword">table</span> 在每个<span class="token keyword">create</span>语句之前增加一个<span class="token keyword">drop</span> <span class="token keyword">table</span>

<span class="token number">4.</span>带语言参数导出
mysqldump <span class="token operator">-</span>uroot <span class="token operator">-</span>p –<span class="token keyword">default</span><span class="token operator">-</span><span class="token keyword">character</span><span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">=</span>latin1 –<span class="token keyword">set</span><span class="token operator">-</span><span class="token keyword">charset</span><span class="token operator">=</span>gbk –skip<span class="token operator">-</span>opt database_name <span class="token operator">&gt;</span> outfile_name<span class="token punctuation">.</span><span class="token keyword">sql</span>

例如，将aaa库备份到文件back_aaa中：
　　<span class="token punctuation">[</span>root<span class="token variable">@test1</span> root<span class="token punctuation">]</span><span class="token comment"># cd　/home/data/mysql</span>
　　<span class="token punctuation">[</span>root<span class="token variable">@test1</span> mysql<span class="token punctuation">]</span><span class="token comment"># mysqldump -u root -p --opt aaa &gt; back_aaa</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br></div></div><h3 id="_2-2、linux命令"><a href="#_2-2、linux命令" class="header-anchor">#</a> 2.2、linux命令</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
指令 ps <span class="token operator">-</span>ef<span class="token operator">|</span>grep mysql 得出结果
    root     <span class="token number">17659</span>     <span class="token number">1</span>  <span class="token number">0</span>  <span class="token number">2011</span> ?        <span class="token number">00</span>:<span class="token number">00</span>:<span class="token number">00</span> <span class="token operator">/</span>bin<span class="token operator">/</span>sh <span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>mysqld_safe <span class="token comment">--datadir=/var/lib/mysql --socket=/var/lib/mysql/mysql.sock --log-error=/var/log/mysqld.log --pid-file=/var/run/mysqld/mysqld.pid   </span>
    mysql    <span class="token number">17719</span> <span class="token number">17659</span>  <span class="token number">0</span>  <span class="token number">2011</span> ?        <span class="token number">03</span>:<span class="token number">14</span>:<span class="token number">57</span> <span class="token operator">/</span>usr<span class="token operator">/</span>libexec<span class="token operator">/</span>mysqld <span class="token comment">--basedir=/usr --datadir=/var/lib/mysql --user=mysql --pid-file=/var/run/mysqld/mysqld.pid --skip-external-locking --socket=/var/lib/mysql/mysql.sock  </span>

usr<span class="token operator">/</span>bin<span class="token operator">/</span>mysql 是指：mysql的运行路径
var<span class="token operator">/</span>lib<span class="token operator">/</span>mysql 是指：mysql数据库文件的存放路径
usr<span class="token operator">/</span>lib<span class="token operator">/</span>mysql 是指：mysql的安装路径 


导出数据库 <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysqldump <span class="token operator">-</span>uroot <span class="token operator">-</span>p1234 webpro <span class="token operator">&gt;</span> <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span><span class="token number">20170814.</span><span class="token keyword">sql</span>
 
导入数据  mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>psd<span class="token punctuation">.</span>web123 UCPPLUS <span class="token operator">&lt;</span> <span class="token operator">/</span>opt<span class="token operator">/</span><span class="token keyword">sql</span><span class="token operator">/</span>ucpplus_v4_0_5<span class="token punctuation">.</span><span class="token keyword">sql</span>

mysql导入时出现<span class="token string">&quot;ERROR at line : Unknown command '\''.&quot;</span>的解决办法
		 mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p12344  <span class="token comment">--default-character-set=utf8 IMP_V12_1 &lt; E:\ids-1.1.2.sql</span>

导出查询语句 <span class="token operator">/</span>opt<span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p12344 <span class="token operator">-</span>e <span class="token string">&quot;use IDSPLUS;select id,loginName from T_USER where id=1\G;&quot;</span> <span class="token operator">&gt;&gt;</span> <span class="token operator">/</span>opt<span class="token operator">/</span>test<span class="token punctuation">.</span>txt

导出表   <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysqldump <span class="token operator">-</span>uroot <span class="token operator">-</span>p1234 webpro t_user <span class="token operator">&gt;</span> <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>t_user<span class="token punctuation">.</span><span class="token keyword">sql</span>

创建数据库
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> UCPPLUS <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_general_ci<span class="token punctuation">;</span>
<span class="token keyword">use</span> UCPPLUS<span class="token punctuation">;</span>
 
登录mysql  <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p1234 
           <span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>padmin

创建、使用数据库   <span class="token keyword">create</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span>  <span class="token keyword">use</span> test<span class="token punctuation">;</span>
导入<span class="token keyword">sql</span>数据 	source <span class="token operator">/</span>root<span class="token operator">/</span><span class="token number">20151010.</span><span class="token keyword">sql</span>


复制表数据到新表
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> T_MENU1 <span class="token operator">LIKE</span> T_MENU<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> T_MENU1 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> T_MENU<span class="token punctuation">;</span>

<span class="token operator">/</span>opt<span class="token operator">/</span>tech<span class="token operator">/</span>apache<span class="token operator">-</span>tomcat<span class="token operator">-</span><span class="token number">6.0</span><span class="token number">.45</span><span class="token operator">/</span>webapps<span class="token operator">/</span>add20170814<span class="token punctuation">.</span><span class="token keyword">sql</span>

修改max_allowed_packet  vi <span class="token operator">/</span>etc<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf

mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p12344



navicat连接mysql失败，授权：
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>db1<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'user1'</span><span class="token variable">@'192.171.1.18'</span> identified <span class="token keyword">by</span> <span class="token string">'pwd1'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>IDSPLUS<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'sd'</span><span class="token variable">@'192.171.1.18'</span> identified <span class="token keyword">by</span> <span class="token string">'shhg12344'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>

<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> root<span class="token variable">@'%'</span> identified <span class="token keyword">by</span> <span class="token string">'sd.web123'</span> <span class="token keyword">with</span> <span class="token keyword">grant</span> <span class="token keyword">option</span><span class="token punctuation">;</span>

<span class="token comment">-- flush privileges;</span>


查询权限
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span>
<span class="token keyword">select</span> Host<span class="token punctuation">,</span><span class="token keyword">User</span><span class="token punctuation">,</span>password_last_changed <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span>

取消权限
<span class="token keyword">revoke</span>  <span class="token keyword">all</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'root'</span><span class="token variable">@'192.168.0.197'</span> <span class="token punctuation">;</span>

删除用户权限
<span class="token keyword">Delete</span> <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span> <span class="token string">&quot;user_name&quot;</span> <span class="token operator">and</span> host <span class="token operator">=</span> <span class="token string">&quot;host_name&quot;</span> <span class="token punctuation">;</span> 


 
linux 的mysql配置文件  <span class="token operator">/</span>etc<span class="token operator">/</span>my<span class="token punctuation">.</span>cnf

查看编码
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'character%'</span><span class="token punctuation">;</span> 

设置编码
<span class="token keyword">set</span> character_set_server<span class="token operator">=</span><span class="token string">'utf8'</span><span class="token punctuation">;</span>  

查看sql_mode
<span class="token keyword">SELECT</span> @<span class="token variable">@GLOBAL.sql_mode</span><span class="token punctuation">;</span>

识别大小写
lower_case_table_names <span class="token operator">=</span> <span class="token number">2</span>

启动mysql
  <span class="token operator">/</span>opt<span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span>support<span class="token operator">-</span>files<span class="token operator">/</span>mysql<span class="token punctuation">.</span>server <span class="token keyword">start</span>
  
  <span class="token operator">/</span>opt<span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span>bin<span class="token operator">/</span>mysqld_safe <span class="token comment">--user=mysql --basedir=/opt/sdtech/mysql --datadir=/opt/sdtech/mysql/data &amp; </span>
  
  cd <span class="token operator">/</span>opt<span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span>
  <span class="token punctuation">.</span><span class="token operator">/</span>bin<span class="token operator">/</span>mysqld_safe <span class="token operator">&amp;</span>
  
  
  chmod <span class="token operator">-</span>R <span class="token number">775</span> mysql
  
  
  cd <span class="token operator">/</span><span class="token keyword">data</span><span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span><span class="token operator">&amp;&amp;</span><span class="token punctuation">.</span><span class="token operator">/</span>bin<span class="token operator">/</span>mysqld_safe <span class="token operator">&amp;</span>
  cd <span class="token operator">/</span>opt<span class="token operator">/</span>sdtech<span class="token operator">/</span>mysql<span class="token operator">/</span> <span class="token operator">&amp;&amp;</span> bin<span class="token operator">/</span>mysqld_safe <span class="token comment">--user=root &amp;</span>
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br></div></div><h3 id="_2-3、group-concat函数"><a href="#_2-3、group-concat函数" class="header-anchor">#</a> 2.3、group_concat函数</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>MySQL中group_concat函数

https:<span class="token comment">//www.iteye.com/blog/hchmsguo-555543</span>

完整的语法如下：

group_concat<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token keyword">DISTINCT</span><span class="token punctuation">]</span> 要连接的字段 <span class="token punctuation">[</span><span class="token keyword">Order</span> <span class="token keyword">BY</span> <span class="token keyword">ASC</span><span class="token operator">/</span><span class="token keyword">DESC</span> 排序字段<span class="token punctuation">]</span> <span class="token punctuation">[</span>Separator <span class="token string">'分隔符'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

 
基本查询

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> aa<span class="token punctuation">;</span>  

<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span> id<span class="token operator">|</span> name <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">10</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">200</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token number">6</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>


以id分组，把name字段的值打印在一行，逗号分隔<span class="token punctuation">(</span>默认<span class="token punctuation">)</span>

<span class="token keyword">select</span> id<span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> aa <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>  

<span class="token operator">+</span><span class="token comment">------+--------------------+</span>
<span class="token operator">|</span> id<span class="token operator">|</span> group_concat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------------+</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

 

以id分组，把name字段的值打印在一行，分号分隔


<span class="token keyword">select</span> id<span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>name separator <span class="token string">';'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> aa <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>  

<span class="token operator">+</span><span class="token comment">------+----------------------------------+</span>
<span class="token operator">|</span> id<span class="token operator">|</span> group_concat<span class="token punctuation">(</span>name separator <span class="token string">';'</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------------------------------+</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">10</span><span class="token punctuation">;</span><span class="token number">20</span><span class="token punctuation">;</span><span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">200</span><span class="token punctuation">;</span><span class="token number">500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+----------------------------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

 

以id分组，把去冗余的name字段的值打印在一行，

逗号分隔

<span class="token keyword">select</span> id<span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span><span class="token keyword">distinct</span> name<span class="token punctuation">)</span> <span class="token keyword">from</span> aa <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>  

<span class="token operator">+</span><span class="token comment">------+-----------------------------+</span>
<span class="token operator">|</span> id<span class="token operator">|</span> group_concat<span class="token punctuation">(</span><span class="token keyword">distinct</span> name<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------------------------+</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">200</span><span class="token punctuation">,</span><span class="token number">500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------------------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

 

以id分组，把name字段的值打印在一行，逗号分隔，以name排倒序

<span class="token keyword">select</span> id<span class="token punctuation">,</span>group_concat<span class="token punctuation">(</span>name <span class="token keyword">order</span> <span class="token keyword">by</span> name <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">from</span> aa <span class="token keyword">group</span> <span class="token keyword">by</span> id<span class="token punctuation">;</span>  

<span class="token operator">+</span><span class="token comment">------+---------------------------------------+</span>
<span class="token operator">|</span> id<span class="token operator">|</span> group_concat<span class="token punctuation">(</span>name <span class="token keyword">order</span> <span class="token keyword">by</span> name <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------------------------------------+</span>
<span class="token operator">|</span><span class="token number">1</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">2</span> <span class="token operator">|</span> <span class="token number">20</span><span class="token operator">|</span>
<span class="token operator">|</span><span class="token number">3</span> <span class="token operator">|</span> <span class="token number">500</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------------------------------------+</span>
<span class="token number">3</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><h3 id="_2-4、left-join左右内外连接"><a href="#_2-4、left-join左右内外连接" class="header-anchor">#</a> 2.4、left join左右内外连接</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">sql</span>之<span class="token keyword">left</span> <span class="token keyword">join</span>、<span class="token keyword">right</span> <span class="token keyword">join</span>、<span class="token keyword">inner</span> <span class="token keyword">join</span>的区别
https:<span class="token comment">//www.cnblogs.com/pcjim/articles/799302.html</span>

<span class="token keyword">left</span> <span class="token keyword">join</span><span class="token punctuation">(</span>左联接<span class="token punctuation">)</span> 返回包括左表中的所有记录和右表中联结字段相等的记录 
<span class="token keyword">right</span> <span class="token keyword">join</span><span class="token punctuation">(</span>右联接<span class="token punctuation">)</span> 返回包括右表中的所有记录和左表中联结字段相等的记录
<span class="token keyword">inner</span> <span class="token keyword">join</span><span class="token punctuation">(</span>等值连接<span class="token punctuation">)</span> 只返回两个表中联结字段相等的行

举例如下： 
<span class="token comment">--------------------------------------------</span>
表A记录如下：
aID　　　　　aNums
<span class="token number">1</span>　　　　　a20050111
<span class="token number">2</span>　　　　　a20050112
<span class="token number">3</span>　　　　　a20050113
<span class="token number">4</span>　　　　　a20050114
<span class="token number">5</span>　　　　　a20050115

表B记录如下:
bID　　　　　bName
<span class="token number">1</span>　　　　　<span class="token number">2006032401</span>
<span class="token number">2</span>　　　　　<span class="token number">2006032402</span>
<span class="token number">3</span>　　　　　<span class="token number">2006032403</span>
<span class="token number">4</span>　　　　　<span class="token number">2006032404</span>
<span class="token number">8</span>　　　　　<span class="token number">2006032408</span>

<span class="token comment">--------------------------------------------</span>
<span class="token number">1.</span><span class="token keyword">left</span> <span class="token keyword">join</span>
<span class="token keyword">sql</span>语句如下: 
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A
<span class="token keyword">left</span> <span class="token keyword">join</span> B 
<span class="token keyword">on</span> A<span class="token punctuation">.</span>aID <span class="token operator">=</span> B<span class="token punctuation">.</span>bID

结果如下:
aID　　　　　aNum　　　　　bID　　　　　bName
<span class="token number">1</span>　　　　　a20050111　　　　<span class="token number">1</span>　　　　　<span class="token number">2006032401</span>
<span class="token number">2</span>　　　　　a20050112　　　　<span class="token number">2</span>　　　　　<span class="token number">2006032402</span>
<span class="token number">3</span>　　　　　a20050113　　　　<span class="token number">3</span>　　　　　<span class="token number">2006032403</span>
<span class="token number">4</span>　　　　　a20050114　　　　<span class="token number">4</span>　　　　　<span class="token number">2006032404</span>
<span class="token number">5</span>　　　　　a20050115　　　　<span class="token boolean">NULL</span>　　　　　<span class="token boolean">NULL</span>

（所影响的行数为 <span class="token number">5</span> 行）
结果说明:
<span class="token keyword">left</span> <span class="token keyword">join</span>是以A表的记录为基础的<span class="token punctuation">,</span>A可以看成左表<span class="token punctuation">,</span>B可以看成右表<span class="token punctuation">,</span><span class="token keyword">left</span> <span class="token keyword">join</span>是以左表为准的<span class="token punctuation">.</span>
换句话说<span class="token punctuation">,</span>左表<span class="token punctuation">(</span>A<span class="token punctuation">)</span>的记录将会全部表示出来<span class="token punctuation">,</span>而右表<span class="token punctuation">(</span>B<span class="token punctuation">)</span>只会显示符合搜索条件的记录<span class="token punctuation">(</span>例子中为: A<span class="token punctuation">.</span>aID <span class="token operator">=</span> B<span class="token punctuation">.</span>bID<span class="token punctuation">)</span><span class="token punctuation">.</span>
B表记录不足的地方均为<span class="token boolean">NULL</span><span class="token punctuation">.</span>
<span class="token comment">--------------------------------------------</span>
<span class="token number">2.</span><span class="token keyword">right</span> <span class="token keyword">join</span>
<span class="token keyword">sql</span>语句如下: 
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A
<span class="token keyword">right</span> <span class="token keyword">join</span> B 
<span class="token keyword">on</span> A<span class="token punctuation">.</span>aID <span class="token operator">=</span> B<span class="token punctuation">.</span>bID

结果如下:
aID　　　　　aNum　　　　　bID　　　　　bName
<span class="token number">1</span>　　　　　a20050111　　　　<span class="token number">1</span>　　　　　<span class="token number">2006032401</span>
<span class="token number">2</span>　　　　　a20050112　　　　<span class="token number">2</span>　　　　　<span class="token number">2006032402</span>
<span class="token number">3</span>　　　　　a20050113　　　　<span class="token number">3</span>　　　　　<span class="token number">2006032403</span>
<span class="token number">4</span>　　　　　a20050114　　　　<span class="token number">4</span>　　　　　<span class="token number">2006032404</span>
<span class="token boolean">NULL</span>　　　　　<span class="token boolean">NULL</span>　　　　　<span class="token number">8</span>　　　　　<span class="token number">2006032408</span>

（所影响的行数为 <span class="token number">5</span> 行）
结果说明:
仔细观察一下<span class="token punctuation">,</span>就会发现<span class="token punctuation">,</span>和<span class="token keyword">left</span> <span class="token keyword">join</span>的结果刚好相反<span class="token punctuation">,</span>这次是以右表<span class="token punctuation">(</span>B<span class="token punctuation">)</span>为基础的<span class="token punctuation">,</span>A表不足的地方用<span class="token boolean">NULL</span>填充<span class="token punctuation">.</span>
<span class="token comment">--------------------------------------------</span>
<span class="token number">3.</span><span class="token keyword">inner</span> <span class="token keyword">join</span>
<span class="token keyword">sql</span>语句如下: 
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A
innerjoin B 
<span class="token keyword">on</span> A<span class="token punctuation">.</span>aID <span class="token operator">=</span> B<span class="token punctuation">.</span>bID

结果如下:
aID　　　　　aNum　　　　　bID　　　　　bName
<span class="token number">1</span>　　　　　a20050111　　　　<span class="token number">1</span>　　　　　<span class="token number">2006032401</span>
<span class="token number">2</span>　　　　　a20050112　　　　<span class="token number">2</span>　　　　　<span class="token number">2006032402</span>
<span class="token number">3</span>　　　　　a20050113　　　　<span class="token number">3</span>　　　　　<span class="token number">2006032403</span>
<span class="token number">4</span>　　　　　a20050114　　　　<span class="token number">4</span>　　　　　<span class="token number">2006032404</span>

结果说明:
很明显<span class="token punctuation">,</span>这里只显示出了 A<span class="token punctuation">.</span>aID <span class="token operator">=</span> B<span class="token punctuation">.</span>bID的记录<span class="token punctuation">.</span>这说明<span class="token keyword">inner</span> <span class="token keyword">join</span>并不以谁为基础<span class="token punctuation">,</span>它只显示符合条件的记录<span class="token punctuation">.</span>
<span class="token comment">--------------------------------------------</span>
注: 
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span>操作用于在任何的 <span class="token keyword">FROM</span> 子句中，组合来源表的记录。使用 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> 运算来创建一个左边外部联接。左边外部联接将包含了从第一个（左边）开始的两个表中的全部记录，即使在第二个（右边）表中并没有相符值的记录。

语法：<span class="token keyword">FROM</span> table1 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> table2 <span class="token keyword">ON</span> table1<span class="token punctuation">.</span>field1 compopr table2<span class="token punctuation">.</span>field2

说明：table1<span class="token punctuation">,</span> table2参数用于指定要将记录组合的表的名称。
field1<span class="token punctuation">,</span> field2参数指定被联接的字段的名称。且这些字段必须有相同的数据类型及包含相同类型的数据，但它们不需要有相同的名称。
compopr参数指定关系比较运算符：<span class="token string">&quot;=&quot;</span>， <span class="token string">&quot;&lt;&quot;</span>， <span class="token string">&quot;&gt;&quot;</span>， <span class="token string">&quot;&lt;=&quot;</span>， <span class="token string">&quot;&gt;=&quot;</span> 或 <span class="token string">&quot;&lt;&gt;&quot;</span>。
如果在<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>操作中要联接包含Memo 数据类型或 OLE Object 数据类型数据的字段，将会发生错误<span class="token punctuation">.</span> 

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br></div></div><h3 id="_2-5、case-when-的使用方法"><a href="#_2-5、case-when-的使用方法" class="header-anchor">#</a> 2.5、case when 的使用方法</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token keyword">case</span> when 的使用方法
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>yazdao<span class="token operator">/</span>archive<span class="token operator">/</span><span class="token number">2009</span><span class="token operator">/</span><span class="token number">12</span><span class="token operator">/</span><span class="token number">09</span><span class="token operator">/</span><span class="token number">1620482.</span>html

<span class="token class-name">Case</span>具有两种格式。简单<span class="token class-name">Case</span>函数和<span class="token class-name">Case</span>搜索函数。
<span class="token operator">--</span>简单<span class="token class-name">Case</span>函数
CASE sex
WHEN <span class="token char">'1'</span> THEN <span class="token char">'男'</span>
WHEN <span class="token char">'2'</span> THEN <span class="token char">'女'</span>
ELSE <span class="token char">'其他'</span> END
<span class="token operator">--</span><span class="token class-name">Case</span>搜索函数
CASE <span class="token class-name">WHEN</span> sex <span class="token operator">=</span> <span class="token char">'1'</span> THEN <span class="token char">'男'</span>
<span class="token class-name">WHEN</span> sex <span class="token operator">=</span> <span class="token char">'2'</span> THEN <span class="token char">'女'</span>
ELSE <span class="token char">'其他'</span> END

这两种方式，可以实现相同的功能。简单<span class="token class-name">Case</span>函数的写法相对比较简洁，但是和<span class="token class-name">Case</span>搜索函数相比，功能方面会有些限制，比如写判断式。 
还有一个需要注意的问题，<span class="token class-name">Case</span>函数只返回第一个符合条件的值，剩下的<span class="token class-name">Case</span>部分将会被自动忽略。 
<span class="token operator">--</span>比如说，下面这段SQL，你永远无法得到“第二类”这个结果
CASE WHEN col_1 IN <span class="token punctuation">(</span> <span class="token char">'a'</span><span class="token punctuation">,</span> <span class="token char">'b'</span><span class="token punctuation">)</span> THEN <span class="token char">'第一类'</span>
WHEN col_1 IN <span class="token punctuation">(</span><span class="token char">'a'</span><span class="token punctuation">)</span>       THEN <span class="token char">'第二类'</span>
ELSE<span class="token char">'其他'</span> END

下面我们来看一下，使用<span class="token class-name">Case</span>函数都能做些什么事情。 

一，已知数据按照另外一种方式进行分组，分析。 

有如下数据<span class="token operator">:</span><span class="token punctuation">(</span>为了看得更清楚，我并没有使用国家代码，而是直接用国家名作为<span class="token class-name">Primary</span> <span class="token class-name">Key</span><span class="token punctuation">)</span> 
国家（country）	人口（population）
中国	<span class="token number">600</span>
美国	<span class="token number">100</span>
加拿大	<span class="token number">100</span>
英国	<span class="token number">200</span>
法国	<span class="token number">300</span>
日本	<span class="token number">250</span>
德国	<span class="token number">200</span>
墨西哥	<span class="token number">50</span>
印度	<span class="token number">250</span>

根据这个国家人口数据，统计亚洲和北美洲的人口数量。应该得到下面这个结果。 
洲	人口
亚洲	<span class="token number">1100</span>
北美洲	<span class="token number">250</span>
其他	<span class="token number">700</span>

想要解决这个问题，你会怎么做？生成一个带有洲<span class="token class-name">Code</span>的<span class="token class-name">View</span>，是一个解决方法，但是这样很难动态的改变统计的方式。 
如果使用<span class="token class-name">Case</span>函数，SQL代码如下<span class="token operator">:</span>
<span class="token class-name">SELECT</span>  <span class="token function">SUM</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span><span class="token punctuation">,</span>
CASE country
WHEN <span class="token char">'中国'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'印度'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'日本'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'美国'</span>     THEN <span class="token char">'北美洲'</span>
WHEN <span class="token char">'加拿大'</span>  THEN <span class="token char">'北美洲'</span>
WHEN <span class="token char">'墨西哥'</span>  THEN <span class="token char">'北美洲'</span>
ELSE <span class="token char">'其他'</span> END
FROM    <span class="token class-name">Table_A</span>
GROUP BY CASE country
WHEN <span class="token char">'中国'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'印度'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'日本'</span>     THEN <span class="token char">'亚洲'</span>
WHEN <span class="token char">'美国'</span>     THEN <span class="token char">'北美洲'</span>
WHEN <span class="token char">'加拿大'</span>  THEN <span class="token char">'北美洲'</span>
WHEN <span class="token char">'墨西哥'</span>  THEN <span class="token char">'北美洲'</span>
ELSE <span class="token char">'其他'</span> END<span class="token punctuation">;</span>

同样的，我们也可以用这个方法来判断工资的等级，并统计每一等级的人数。SQL代码如下； 
SELECT
CASE WHEN salary <span class="token operator">&lt;=</span> <span class="token number">500</span> THEN <span class="token char">'1'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">500</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">600</span>  THEN <span class="token char">'2'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">600</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">800</span>  THEN <span class="token char">'3'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">800</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">1000</span> THEN <span class="token char">'4'</span>
ELSE NULL <span class="token class-name">END</span> salary_class<span class="token punctuation">,</span>
<span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
FROM    <span class="token class-name">Table_A</span>
GROUP BY
CASE WHEN salary <span class="token operator">&lt;=</span> <span class="token number">500</span> THEN <span class="token char">'1'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">500</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">600</span>  THEN <span class="token char">'2'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">600</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">800</span>  THEN <span class="token char">'3'</span>
WHEN salary <span class="token operator">&gt;</span> <span class="token number">800</span> AND salary <span class="token operator">&lt;=</span> <span class="token number">1000</span> THEN <span class="token char">'4'</span>
ELSE <span class="token class-name">NULL</span> END<span class="token punctuation">;</span>

二，用一个SQL语句完成不同条件的分组。 

有如下数据 
国家（country）	性别（sex）	人口（population）
中国	<span class="token number">1</span>	<span class="token number">340</span>
中国	<span class="token number">2</span>	<span class="token number">260</span>
美国	<span class="token number">1</span>	<span class="token number">45</span>
美国	<span class="token number">2</span>	<span class="token number">55</span>
加拿大	<span class="token number">1</span>	<span class="token number">51</span>
加拿大	<span class="token number">2</span>	<span class="token number">49</span>
英国	<span class="token number">1</span>	<span class="token number">40</span>
英国	<span class="token number">2</span>	<span class="token number">60</span>

按照国家和性别进行分组，得出结果如下 
国家	男	女
中国	<span class="token number">340</span>	<span class="token number">260</span>
美国	<span class="token number">45</span>	<span class="token number">55</span>
加拿大	<span class="token number">51</span>	<span class="token number">49</span>
英国	<span class="token number">40</span>	<span class="token number">60</span>

普通情况下，用UNION也可以实现用一条语句进行查询。但是那样增加消耗<span class="token punctuation">(</span>两个<span class="token class-name">Select</span>部分<span class="token punctuation">)</span>，而且SQL语句会比较长。 
下面是一个是用<span class="token class-name">Case</span>函数来完成这个功能的例子 
<span class="token class-name">SELECT</span> country<span class="token punctuation">,</span>
<span class="token function">SUM</span><span class="token punctuation">(</span> CASE <span class="token class-name">WHEN</span> sex <span class="token operator">=</span> <span class="token char">'1'</span> THEN
population ELSE <span class="token number">0</span> END<span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token operator">--</span>男性人口
<span class="token function">SUM</span><span class="token punctuation">(</span> CASE <span class="token class-name">WHEN</span> sex <span class="token operator">=</span> <span class="token char">'2'</span> THEN
population ELSE <span class="token number">0</span> END<span class="token punctuation">)</span>   <span class="token operator">--</span>女性人口
FROM  <span class="token class-name">Table_A</span>
GROUP <span class="token class-name">BY</span> country<span class="token punctuation">;</span>

这样我们使用<span class="token class-name">Select</span>，完成对二维表的输出形式，充分显示了<span class="token class-name">Case</span>函数的强大。 

三，在<span class="token class-name">Check</span>中使用<span class="token class-name">Case</span>函数。 

在<span class="token class-name">Check</span>中使用<span class="token class-name">Case</span>函数在很多情况下都是非常不错的解决方法。可能有很多人根本就不用<span class="token class-name">Check</span>，那么我建议你在看过下面的例子之后也尝试一下在SQL中使用<span class="token class-name">Check</span>。 
下面我们来举个例子 
公司<span class="token class-name">A</span>，这个公司有个规定，女职员的工资必须高于<span class="token number">1000</span>块。如果用<span class="token class-name">Check</span>和<span class="token class-name">Case</span>来表现的话，如下所示
CONSTRAINT check_salary CHECK
<span class="token punctuation">(</span> CASE <span class="token class-name">WHEN</span> sex <span class="token operator">=</span> <span class="token char">'2'</span>
THEN CASE WHEN salary <span class="token operator">&gt;</span> <span class="token number">1000</span>
THEN <span class="token number">1</span> ELSE <span class="token number">0</span> END
ELSE <span class="token number">1</span> END <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">)</span>

如果单纯使用<span class="token class-name">Check</span>，如下所示 
CONSTRAINT check_salary CHECK
<span class="token punctuation">(</span> sex <span class="token operator">=</span> <span class="token char">'2'</span> AND salary <span class="token operator">&gt;</span> <span class="token number">1000</span> <span class="token punctuation">)</span>

女职员的条件倒是符合了，男职员就无法输入了。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- case when更新</span>
<span class="token keyword">update</span> ins_xsf_purchase_detail <span class="token keyword">set</span> 
 purchase_gross_weight <span class="token operator">=</span> <span class="token keyword">CASE</span> 
		<span class="token keyword">WHEN</span> product_id <span class="token operator">=</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token number">99</span>
		<span class="token keyword">WHEN</span> product_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token number">1</span> 
 <span class="token keyword">ELSE</span>	<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">,</span> 
 gross_price <span class="token operator">=</span> <span class="token keyword">CASE</span> 
		<span class="token keyword">WHEN</span> product_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token number">900</span>
		<span class="token keyword">WHEN</span> product_id <span class="token operator">=</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token number">1</span> 
 <span class="token keyword">ELSE</span>	<span class="token number">0</span> <span class="token keyword">end</span><span class="token punctuation">,</span>gross_weight_source<span class="token operator">=</span><span class="token number">2</span>
<span class="token keyword">where</span> purchase_order<span class="token operator">=</span><span class="token string">'HZCCG20220906618201'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_2-6、复制表结构表数据"><a href="#_2-6、复制表结构表数据" class="header-anchor">#</a> 2.6、复制表结构表数据</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code>
<span class="token class-name">Mysql</span>复制表结构、表数据的方法

<span class="token number">1</span>、复制表结构及数据到新表（不包含主键、索引、分区等）
CREATE TABLE 新表 SELECT <span class="token operator">*</span> FROM 旧表
或 CREATE TABLE 新表 AS SELECT <span class="token operator">*</span> FROM 旧表

这种方法将旧表基本结构和数据复制到新表。
不过这种方法的一个最不好的地方就是新表中没有了旧表的主键、索引、<span class="token class-name">Extra</span>（auto_increment，字符集编码及排序）、注释、分区等属性 以及触发器、外键等。


<span class="token number">2</span>、只复制表结构到新表
CREATE TABLE 新表 SELECT <span class="token operator">*</span> FROM 旧表 <span class="token class-name">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span> （只是第一种方式去除掉数据）
CREATE TABLE 新表 LIKE 旧表

这种方式的复制可以复制旧表的主键、索引、<span class="token class-name">Extra</span>（auto_increment，字符集编码及排序）、注释、分区等属性。但是不包含触发器、外键等


<span class="token number">3</span>、复制旧表的数据到新表
INSERT INTO 新表 SELECT <span class="token operator">*</span> FROM 旧表
INSERT INTO 新表<span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> SELECT 字段<span class="token number">1</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> FROM 旧表

上面两条语句的前提是新表已经存在


<span class="token number">4</span>、复制表结构及数据到新表（包含主键、索引、分区等）
结合上述第<span class="token number">2</span>、<span class="token number">3</span>点，即：

先 CREATE TABLE 新表 LIKE 旧表
然后 INSERT INTO 新表 SELECT <span class="token operator">*</span> FROM 旧表


<span class="token number">5</span>、可以将表<span class="token number">1</span>结构复制到表<span class="token number">2</span>（mysql不支持）
SELECT <span class="token operator">*</span> INTO 表<span class="token number">2</span> FROM 表<span class="token number">1</span> <span class="token class-name">WHERE</span> <span class="token number">1</span><span class="token operator">=</span><span class="token number">2</span>


<span class="token number">6</span>、可以将表<span class="token number">1</span>内容全部复制到表<span class="token number">2</span>（mysql不支持）
SELECT <span class="token operator">*</span> INTO 表<span class="token number">2</span> FROM 表<span class="token number">1</span>


<span class="token number">7</span>、 show create table 旧表<span class="token punctuation">;</span>
这样会将旧表的创建命令列出。我们只需要将该命令拷贝出来，更改table的名字，就可以建立一个完全一样的表

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="_3、小技巧"><a href="#_3、小技巧" class="header-anchor">#</a> 3、小技巧</h2> <h3 id="_3-1、日期转化与计算"><a href="#_3-1、日期转化与计算" class="header-anchor">#</a> 3.1、日期转化与计算</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--sql将毫秒数字转换为日期</span>
<span class="token keyword">SELECT</span> FROM_UNIXTIME<span class="token punctuation">(</span>operation_time<span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token string">&quot;%Y-%m-%d %H:%i:%s&quot;</span><span class="token punctuation">)</span> operationDate <span class="token keyword">FROM</span> ins_purchase<span class="token punctuation">;</span>


<span class="token comment">---时间格式化</span>
<span class="token keyword">select</span> date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">&quot;%Y-%m-%d %H:%i:%s&quot;</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">table</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--时间计算</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>car_number<span class="token punctuation">,</span>tel<span class="token punctuation">,</span>person_liable<span class="token punctuation">,</span>result<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>
date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%H:%i:%s'</span><span class="token punctuation">)</span> t1<span class="token punctuation">,</span>
timediff<span class="token punctuation">(</span>date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'03:00:00'</span><span class="token punctuation">)</span> t2<span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">HOUR</span><span class="token punctuation">(</span>timediff<span class="token punctuation">(</span>date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'03:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">ROUND</span><span class="token punctuation">(</span><span class="token keyword">MINUTE</span><span class="token punctuation">(</span>timediff<span class="token punctuation">(</span>date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token string">'%H:%i:%s'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'03:00:00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
 t3 <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>ins_car_use_log<span class="token punctuation">`</span></span> <span class="token keyword">where</span> person_liable <span class="token operator">like</span> <span class="token string">'%林%'</span>
 <span class="token keyword">order</span> <span class="token keyword">by</span> create_time <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">100</span><span class="token punctuation">;</span>
 
 
<span class="token comment">--时间大于零点零五则是当天，零点到零点零五是昨天</span>
<span class="token keyword">select</span> <span class="token keyword">CASE</span>  <span class="token keyword">WHEN</span> <span class="token keyword">TIME</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>add_time<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token string">'00:05:00'</span> <span class="token keyword">THEN</span> b<span class="token punctuation">.</span>add_time  
       <span class="token keyword">ELSE</span> DATE_SUB<span class="token punctuation">(</span>b<span class="token punctuation">.</span>add_time<span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">DAY</span><span class="token punctuation">)</span> 
   <span class="token keyword">END</span> <span class="token keyword">AS</span> date_of_day <span class="token keyword">from</span> ins_test_order b

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">--时间增减</span>
<span class="token keyword">select</span> DATE_ADD<span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token keyword">DAY</span> <span class="token punctuation">)</span> <span class="token keyword">from</span> dual

<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>product_id productId<span class="token punctuation">,</span>sales  <span class="token keyword">FROM</span> ins_period_sales <span class="token keyword">where</span> create_time <span class="token operator">&gt;</span> DATE_ADD<span class="token punctuation">(</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">2</span> <span class="token keyword">DAY</span> <span class="token punctuation">)</span> 


<span class="token comment">-- TIMESTAMPDIFF函数来计算两个时间之间的小时数差异</span>
<span class="token keyword">select</span>  FLOOR<span class="token punctuation">(</span><span class="token punctuation">(</span>UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2024-05-07 00:00:00'</span><span class="token punctuation">)</span><span class="token operator">-</span> UNIX_TIMESTAMP<span class="token punctuation">(</span><span class="token string">'2024-05-06 17:46:00'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span>  <span class="token keyword">from</span> dual

<span class="token comment">-- HOUR来计算两个时间之间的小时数差异</span>
<span class="token keyword">SELECT</span> TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">HOUR</span><span class="token punctuation">,</span> <span class="token string">'2024-05-07 00:00:00'</span><span class="token punctuation">,</span><span class="token string">'2024-05-06 17:46:00'</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-2、构造每一个小时为一行数据"><a href="#_3-2、构造每一个小时为一行数据" class="header-anchor">#</a> 3.2、构造每一个小时为一行数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>
<span class="token comment">-- 计算相隔几天的两个时间相减得到的差值，每一个小时为一行数据。</span>


<span class="token comment">-- 创建一个数字表 </span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> numbers <span class="token punctuation">(</span>n <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>numbers<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>n<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">-- 设置变量</span>
<span class="token keyword">SET</span> <span class="token variable">@sorting_start_time</span> <span class="token operator">=</span> <span class="token string">'2024-05-06 17:46:00'</span><span class="token punctuation">;</span> 
<span class="token keyword">SET</span> <span class="token variable">@sorting_end_time</span> <span class="token operator">=</span> <span class="token string">'2024-05-07 23:00:00'</span><span class="token punctuation">;</span>  

<span class="token comment">-- 查看变量</span>
<span class="token comment">-- select @sorting_start_time</span>
 

<span class="token comment">-- 每一个小时为一行数据</span>

<span class="token keyword">SELECT</span>  
    DATE_ADD<span class="token punctuation">(</span><span class="token variable">@sorting_start_time</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> n <span class="token keyword">HOUR</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> hour_time  
<span class="token keyword">FROM</span> numbers n  
<span class="token keyword">WHERE</span> n <span class="token operator">&lt;=</span> TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">HOUR</span><span class="token punctuation">,</span> <span class="token variable">@sorting_start_time</span><span class="token punctuation">,</span> <span class="token variable">@sorting_end_time</span><span class="token punctuation">)</span>  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> hour_time

<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">17</span>:<span class="token number">46</span>:<span class="token number">00</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">18</span>:<span class="token number">46</span>:<span class="token number">00</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">19</span>:<span class="token number">46</span>:<span class="token number">00</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">20</span>:<span class="token number">46</span>:<span class="token number">00</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">21</span>:<span class="token number">46</span>:<span class="token number">00</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span> <span class="token number">22</span>:<span class="token number">46</span>:<span class="token number">00</span>


<span class="token comment">-- 每一个小时为一行数据，日期与小时分开、小时段</span>

<span class="token keyword">select</span> sorting_work_date<span class="token punctuation">,</span>
CONCAT<span class="token punctuation">(</span><span class="token keyword">case</span> <span class="token keyword">when</span> current_hour_val<span class="token operator">&lt;=</span><span class="token number">9</span> <span class="token keyword">then</span> <span class="token punctuation">(</span> CONCAT<span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span> <span class="token punctuation">,</span> current_hour_val<span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span>begin_min_val<span class="token punctuation">)</span> <span class="token punctuation">)</span>  
			<span class="token keyword">else</span> <span class="token punctuation">(</span> CONCAT<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token punctuation">,</span> current_hour_val<span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span>begin_min_val<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">,</span>
 <span class="token keyword">case</span> <span class="token keyword">when</span> current_hour_val<span class="token operator">&lt;=</span><span class="token number">8</span> <span class="token keyword">then</span> <span class="token punctuation">(</span> CONCAT<span class="token punctuation">(</span><span class="token string">&quot;0&quot;</span> <span class="token punctuation">,</span> current_hour_val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span>begin_min_val<span class="token punctuation">)</span> <span class="token punctuation">)</span> 
			<span class="token keyword">when</span> current_hour_val<span class="token operator">=</span><span class="token number">23</span> <span class="token keyword">then</span> <span class="token punctuation">(</span> CONCAT<span class="token punctuation">(</span><span class="token string">&quot;00:&quot;</span><span class="token punctuation">,</span>begin_min_val<span class="token punctuation">)</span> <span class="token punctuation">)</span>  
<span class="token keyword">else</span> <span class="token punctuation">(</span> CONCAT<span class="token punctuation">(</span><span class="token string">&quot;&quot;</span> <span class="token punctuation">,</span> current_hour_val<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">,</span>begin_min_val<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">end</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token keyword">as</span> time_slot
 <span class="token keyword">from</span> <span class="token punctuation">(</span>

<span class="token keyword">select</span> substring<span class="token punctuation">(</span>hour_time<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">as</span> sorting_work_date<span class="token punctuation">,</span>
CAST<span class="token punctuation">(</span>substring<span class="token punctuation">(</span>hour_time<span class="token punctuation">,</span><span class="token number">12</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> SIGNED<span class="token punctuation">)</span> <span class="token keyword">AS</span> current_hour_val<span class="token punctuation">,</span>
substring<span class="token punctuation">(</span>hour_time<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">as</span> begin_min_val
<span class="token keyword">from</span> <span class="token punctuation">(</span>
<span class="token keyword">SELECT</span>  
    DATE_ADD<span class="token punctuation">(</span><span class="token variable">@sorting_start_time</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> n <span class="token keyword">HOUR</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> hour_time  
<span class="token keyword">FROM</span> numbers n  
<span class="token keyword">WHERE</span> n <span class="token operator">&lt;=</span> TIMESTAMPDIFF<span class="token punctuation">(</span><span class="token keyword">HOUR</span><span class="token punctuation">,</span> <span class="token variable">@sorting_start_time</span><span class="token punctuation">,</span> <span class="token variable">@sorting_end_time</span><span class="token punctuation">)</span>  
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> hour_time
<span class="token punctuation">)</span> a

<span class="token punctuation">)</span> b


<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">17</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">18</span>:<span class="token number">46</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">18</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">19</span>:<span class="token number">46</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">19</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">20</span>:<span class="token number">46</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">20</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">21</span>:<span class="token number">46</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">21</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">22</span>:<span class="token number">46</span>
<span class="token number">2024</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">06</span>	<span class="token number">22</span>:<span class="token number">46</span><span class="token operator">-</span><span class="token number">23</span>:<span class="token number">46</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h3 id="_3-3、指定排序"><a href="#_3-3、指定排序" class="header-anchor">#</a> 3.3、指定排序</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 中文排序 </span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>T_USER<span class="token punctuation">`</span></span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token keyword">convert</span><span class="token punctuation">(</span>name <span class="token keyword">using</span> gbk<span class="token punctuation">)</span>  <span class="token keyword">ASC</span> <span class="token keyword">limit</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 指定字段值排序</span>
<span class="token keyword">SELECT</span> id<span class="token punctuation">,</span>name <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>T_USER<span class="token punctuation">`</span></span> <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> FIELD<span class="token punctuation">(</span> <span class="token keyword">status</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">)</span> <span class="token keyword">ASC</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4、截取字符串"><a href="#_3-4、截取字符串" class="header-anchor">#</a> 3.4、截取字符串</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- SUBSTRING  从指定角标开始截取</span>
<span class="token comment">-- LOCATE     查找字符串中指定字符的位置</span>

<span class="token keyword">select</span> id<span class="token punctuation">,</span> mode_name<span class="token punctuation">,</span> action_name<span class="token punctuation">,</span> goods_handle_id<span class="token punctuation">,</span> handle_name<span class="token punctuation">,</span> handle_time<span class="token punctuation">,</span> mark<span class="token punctuation">,</span>SUBSTRING<span class="token punctuation">(</span>info<span class="token punctuation">,</span> 
LOCATE<span class="token punctuation">(</span><span class="token string">'283510'</span><span class="token punctuation">,</span>info<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> log <span class="token keyword">from</span> ins_handle_log <span class="token keyword">where</span> goods_handle_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">12257</span><span class="token punctuation">)</span> <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">desc</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>SUBSTRING_INDEX - 按分隔符截取字符串
SUBSTRING_INDEX(str, delimiter, count)
返回一个 str 的子字符串，在 delimiter 出现 count 次的位置截取。

如果 count &gt; 0，从则左边数起，且返回位置前的子串；
如果 count &lt; 0，从则右边数起，且返回位置后的子串。
delimiter 是大小写敏感，且是多字节安全的。

mysql&gt; SELECT SUBSTRING_INDEX('www.mysql.com', '.', 2);
        -&gt; 'www.mysql'
mysql&gt; SELECT SUBSTRING_INDEX('www.mysql.com', '.', -2);
        -&gt; 'mysql.com'
		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>LEFT(str,len)
从左边开始截取，str：被截取字符串；len：截取长度

RIGHT(str,len)
从右边开始截取，str：被截取字符串；len：截取长度

SUBSTR(str, pos, len)
与SUBSTRING(str, pos, len)函数的使用一样

MID(str, pos, len)
与SUBSTRING(str, pos, len)函数的使用一样

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3-5、分组取最值"><a href="#_3-5、分组取最值" class="header-anchor">#</a> 3.5、分组取最值</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 分组取最值</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> ins_delivery_region_sort <span class="token keyword">order</span> <span class="token keyword">by</span> update_time <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">99999999</span><span class="token punctuation">)</span> so <span class="token keyword">group</span> <span class="token keyword">by</span> region
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 新增或修改数据</span>
<span class="token keyword">Insert</span> <span class="token keyword">into</span> fd_supplier <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">#{supplier_id},#{s_code}) on duplicate key update s_code=#{s_code}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-6、修改root密码"><a href="#_3-6、修改root密码" class="header-anchor">#</a> 3.6、修改root密码</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>cnblogs<span class="token punctuation">.</span>com<span class="token operator">/</span>kyosusan<span class="token operator">/</span>p<span class="token operator">/</span><span class="token number">5198934</span><span class="token punctuation">.</span>html	
修改root密码

一、知道原来的myql数据库的root密码；

①： 在终端命令行输入 mysqladmin <span class="token operator">-</span>u root <span class="token operator">-</span>p password <span class="token string">&quot;新密码&quot;</span> 回车 ，Enter password<span class="token operator">:</span> 【输入原来的旧密码】
②： 登录mysql系统修改， mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p 回车 Enter password<span class="token operator">:</span> 【输入原来的密码】

mysql<span class="token operator">&gt;</span>use mysql<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> update user <span class="token keyword">set</span> password<span class="token operator">=</span><span class="token function">password</span><span class="token punctuation">(</span><span class="token string">&quot;新密码&quot;</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>        【密码注意大小写】

mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> exit<span class="token punctuation">;</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_3-7、死锁deadlock"><a href="#_3-7、死锁deadlock" class="header-anchor">#</a> 3.7、死锁Deadlock</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Mysql报Deadlock found when trying to <span class="token keyword">get</span> lock<span class="token punctuation">;</span> <span class="token keyword">try</span> restarting transaction问题解决<span class="token operator">!</span><span class="token operator">!</span>
<span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>csdn<span class="token punctuation">.</span>net<span class="token operator">/</span>qq_44240587<span class="token operator">/</span>article<span class="token operator">/</span>details<span class="token operator">/</span><span class="token number">108400666</span>   

行级锁在使用的时候并不是直接锁掉这行记录<span class="token punctuation">,</span>而是锁索引<span class="token punctuation">.</span>
<span class="token function">如果一条sql用到了主键索引</span><span class="token punctuation">(</span>mysql主键自带索引<span class="token punctuation">)</span><span class="token punctuation">,</span>mysql会锁住主键索引<span class="token punctuation">;</span>
如果一条sql操作了非主键索引<span class="token punctuation">,</span>mysql会先锁住非主键索引<span class="token punctuation">,</span>再锁定主键索引<span class="token punctuation">.</span>


<span class="token operator">--</span>查询一下mysql的事务处理表
select <span class="token operator">*</span> from information_schema<span class="token punctuation">.</span><span class="token constant">INNODB_TRX</span>  

<span class="token operator">--</span>杀掉进程
kill 进程<span class="token constant">ID</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-java line-numbers-mode"><pre class="language-java"><code>如何检测锁定表（由LOCK TABLE锁定）
https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>toutiao<span class="token punctuation">.</span>com<span class="token operator">/</span>article<span class="token operator">/</span><span class="token number">7237364692283458106</span>

SHOW ENGINE <span class="token class-name">INNODB</span> STATUS<span class="token punctuation">;</span>
该命令会输出当前 <span class="token class-name">InnoDB</span> 存储引擎的详细状态信息，其中包括事务、锁定和死锁等信息。

SHOW <span class="token class-name">OPEN</span> TABLES<span class="token punctuation">;</span>
该命令会返回一个表格，其中显示了所有打开的表的详细信息，包括库名、表名、表类型、锁类型等。


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>mysql数据库死锁：Deadlock found when trying to get lock; try restarting transaction
https://www.w3cschool.cn/article/3739209.html

减少死锁：
使用事务，不使用 lock tables 。
保证没有长事务。
操作完之后立即提交事务，特别是在交互式命令行中。
如果在用 (SELECT ... FOR UPDATE or SELECT ... LOCK IN SHARE MODE)，尝试降低隔离级别。
修改多个表或者多个行的时候，将修改的顺序保持一致。
创建索引，可以使创建的锁更少。
最好不要用 (SELECT ... FOR UPDATE or SELECT ... LOCK IN SHARE MODE)。
如果上述都无法解决问题，那么尝试使用 lock tables t1, t2, t3 锁多张表


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-8、文档"><a href="#_3-8、文档" class="header-anchor">#</a> 3.8、文档</h3> <ul><li><p><a href="https://gitlab.com/xuyq123/mynotes/-/blob/master/%E8%BF%90%E7%BB%B4/linuxNote-x.md" target="_blank" rel="noopener noreferrer">linux笔记<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://scott180.github.io/reco-blog/docs/bian-cheng/shu-ju-ku/shu-ju-ku-ge-chi-ji-bie.html" target="_blank" rel="noopener noreferrer">数据库隔离级别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://scott180.github.io/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlkai-qi-log-binri-zhi.html" target="_blank" rel="noopener noreferrer">mysql开启log-bin日志<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://gitlab.com/xuyq123/mynotes/-/blob/master/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql%E4%B9%8Bexplan%E7%B4%A2%E5%BC%95%E4%BC%98%E5%8C%96%E8%AF%B4%E6%98%8E.md" target="_blank" rel="noopener noreferrer">mysql之explan索引优化说明<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最近更新: </span> <span class="time">2025-05-23 14:24:45</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/reco-blog/docs/bian-cheng/yun-wei/gitlab-github-giteebu-shu-mkdocszhu-ti-cang-ku.html" class="prev">
            gitlab、github、gitee布署mkdocs主题仓库
          </a></span> <span class="next"><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/oraclenote.html">
            oracleNote
          </a></span></p></div> <div class="comments-wrapper" style="display:none;"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_1、安装mysql" class="sidebar-link reco-side-_1、安装mysql" data-v-cb1513f6>1、安装mysql</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_1-1、下载软件" class="sidebar-link reco-side-_1-1、下载软件" data-v-cb1513f6>1.1、下载软件</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_1-2、配置环境变量" class="sidebar-link reco-side-_1-2、配置环境变量" data-v-cb1513f6>1.2、配置环境变量</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_1-3、注意事项" class="sidebar-link reco-side-_1-3、注意事项" data-v-cb1513f6>1.3、注意事项</a></li><li class="level-2" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2、操作语法" class="sidebar-link reco-side-_2、操作语法" data-v-cb1513f6>2、操作语法</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-1、基础命令" class="sidebar-link reco-side-_2-1、基础命令" data-v-cb1513f6>2.1、基础命令</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-2、linux命令" class="sidebar-link reco-side-_2-2、linux命令" data-v-cb1513f6>2.2、linux命令</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-3、group-concat函数" class="sidebar-link reco-side-_2-3、group-concat函数" data-v-cb1513f6>2.3、group_concat函数</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-4、left-join左右内外连接" class="sidebar-link reco-side-_2-4、left-join左右内外连接" data-v-cb1513f6>2.4、left join左右内外连接</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-5、case-when-的使用方法" class="sidebar-link reco-side-_2-5、case-when-的使用方法" data-v-cb1513f6>2.5、case when 的使用方法</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_2-6、复制表结构表数据" class="sidebar-link reco-side-_2-6、复制表结构表数据" data-v-cb1513f6>2.6、复制表结构表数据</a></li><li class="level-2" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3、小技巧" class="sidebar-link reco-side-_3、小技巧" data-v-cb1513f6>3、小技巧</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-1、日期转化与计算" class="sidebar-link reco-side-_3-1、日期转化与计算" data-v-cb1513f6>3.1、日期转化与计算</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-2、构造每一个小时为一行数据" class="sidebar-link reco-side-_3-2、构造每一个小时为一行数据" data-v-cb1513f6>3.2、构造每一个小时为一行数据</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-3、指定排序" class="sidebar-link reco-side-_3-3、指定排序" data-v-cb1513f6>3.3、指定排序</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-4、截取字符串" class="sidebar-link reco-side-_3-4、截取字符串" data-v-cb1513f6>3.4、截取字符串</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-5、分组取最值" class="sidebar-link reco-side-_3-5、分组取最值" data-v-cb1513f6>3.5、分组取最值</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-6、修改root密码" class="sidebar-link reco-side-_3-6、修改root密码" data-v-cb1513f6>3.6、修改root密码</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-7、死锁deadlock" class="sidebar-link reco-side-_3-7、死锁deadlock" data-v-cb1513f6>3.7、死锁Deadlock</a></li><li class="level-3" data-v-cb1513f6><a href="/reco-blog/docs/bian-cheng/shu-ju-ku/mysqlnote.html#_3-8、文档" class="sidebar-link reco-side-_3-8、文档" data-v-cb1513f6>3.8、文档</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/reco-blog/assets/js/app.fc80a8f6.js" defer></script><script src="/reco-blog/assets/js/3.c09d8458.js" defer></script><script src="/reco-blog/assets/js/1.46157097.js" defer></script><script src="/reco-blog/assets/js/69.c22aa700.js" defer></script>
  </body>
</html>
